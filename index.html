<!DOCTYPE html>
<html>
<head>
    <title>RTVis WebGPU Tutorial</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #c6339e;
        }
    </style>
</head>
<body>

<!-- GUI -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.9/dat.gui.min.js"></script>

<!-- Util -->
<script src="tree.js"></script>
<script src="loader.js"></script>

<!-- Shaders -->
<script src="shaders/add.js"></script>
<script src="shaders/aggregate.js"></script>
<script src="shaders/image.js"></script>
<script src="shaders/markers.js"></script>
<script src="shaders/heatmapCompute.js"></script>
<script src="shaders/heatmapRender.js"></script>

<!-- Tutorial -->
<script src="tutorial.js"></script>

<script src="tasks/task1.js"></script>
<script src="tasks/task2.js"></script>
<script src="tasks/task3.js"></script>
<script src="tasks/task4.js"></script>
<script src="tasks/task5.js"></script>
<script src="tasks/tasks.js"></script>

<script>
    // Declare global variables
    let GUI, CANVAS, GPU, ADAPTER, DEVICE, CONTEXT;

    window.addEventListener("load", async () => {
        // Initialize GUI
        GUI = new dat.GUI({ name: document.title });

        // Initialize canvas
        CANVAS = document.createElement("canvas");
        document.body.appendChild(CANVAS);

        // Initialize WebGPU
        GPU = navigator.gpu;
        if (!GPU) {
            alert("WebGPU is not supported in your browser. Please use/update Chrome or Chromium instead.");
            return;
        }
        ADAPTER = await navigator.gpu.requestAdapter();
        DEVICE = await ADAPTER.requestDevice();
        CONTEXT = CANVAS.getContext("webgpu");
        CONTEXT.configure({
            device: DEVICE,
            format: GPU.getPreferredCanvasFormat(),
        });

        TASKS.runAll();
    });
</script>

</body>
</html>